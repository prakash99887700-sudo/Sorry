<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Handwritten Letter Just For You</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f0f0;
            margin: 0;
            font-family: 'Georgia', serif;
            perspective: 1500px;
        }
        .book {
            width: 750px; /* Adjust this to match your image width */
            height: 1150px; /* Adjust this to match your image height */
            position: relative;
            transform-style: preserve-3d;
        }
        .page {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: #fffaf0;
            border: 1px solid #ccc;
            box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2);
            backface-visibility: hidden;
            transform-origin: left;
            transition: transform 1.2s ease-in-out; /* Smoother transition */
            overflow: hidden;
        }
        
        /* --- IMAGE-BASED PAGES STYLING --- */
        .image-page {
            /* These styles apply to pages 1 through 5, which are your handwritten photos */
            background-size: cover; 
            background-position: center; 
            background-repeat: no-repeat; 
            padding: 0; /* Remove padding for the images */
            line-height: normal;
        }

        /* --- STYLING FOR PAGE 0 (THE TEXT GREETING/APOLOGY) --- */
        #page-0 {
            background-color: #e6f7ff;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-size: 1.8em;
            color: #1a73e8;
            font-family: 'Great Vibes', cursive;
            padding: 40px; /* Keep padding for text */
            box-sizing: border-box;
        }
        
        /* --- IMAGE PATHS FOR PAGES 1-5 --- */
        /* Change the file names/extensions here if needed (e.g., to .png) */
        #page-1 { background-image: url('page1.jpg'); } 
        #page-2 { background-image: url('page2.jpg'); } 
        #page-3 { background-image: url('page3.jpg'); } 
        #page-4 { background-image: url('page4.jpg'); } 
        #page-5 { background-image: url('page5.jpg'); } 

        /* This hides the back of the pages */
        .page.flipped {
            transform: rotateY(-180deg);
        }
        
        /* --- Z-INDEX STACKING --- */
        #page-0 { z-index: 15; }
        #page-1 { z-index: 14; }
        #page-2 { z-index: 13; }
        #page-3 { z-index: 12; }
        #page-4 { z-index: 11; }
        #page-5 { z-index: 10; }

        .button-container {
            position: absolute;
            bottom: 20px;
            right: 40px;
            z-index: 20; /* Ensure button is always visible */
        }
        .flip-button {
            padding: 10px 20px;
            font-size: 1em;
            cursor: pointer;
            background-color: #1a73e8;
            color: white;
            border: none;
            border-radius: 5px;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s;
        }
        .flip-button:hover {
            background-color: #0d47a1;
        }

        @import url('https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap');
    </style>
</head>
<body>

    <audio id="background-music" loop autoplay>
        <source src="your_song.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <div class="book">
        <div class="page" id="page-0">
            <h1>My Dearest Love Taniya(Manu),</h1>
            <p>Please click the button below to turn the page and accept this small token of my heart and a deep, sincere apology.</p>
            <div style="margin-top: 30px; font-size: 0.8em; color: #555;">(Click 'Next Page' to start reading)</div>
        </div>

        <div class="page image-page" id="page-1"></div>
        <div class="page image-page" id="page-2"></div>
        <div class="page image-page" id="page-3"></div>
        <div class="page image-page" id="page-4"></div>
        <div class="page image-page" id="page-5"></div>
        
    </div>

    <div class="button-container">
        <button class="flip-button" id="flip-button">Next Page &gt;</button>
    </div>

    <script>
        const pages = document.querySelectorAll('.page');
        const flipButton = document.getElementById('flip-button');
        const music = document.getElementById('background-music');
        let currentPageIndex = 0; // Starts at 0 (the greeting page)

        // --- MUSIC AUTOPLAY FIX ---
        // Function to start music on user interaction
        function startMusic() {
            music.play().catch(error => {
                console.log("Autoplay prevented. Music will start on the first button click.", error);
            });
            // Remove listeners after the first interaction
            document.removeEventListener('click', startMusic);
            document.removeEventListener('keydown', startMusic);
        }

        // Many browsers require a user action (like a click) to play audio
        document.addEventListener('click', startMusic, { once: true });
        document.addEventListener('keydown', startMusic, { once: true });


        // --- PAGE FLIPPING LOGIC ---
        flipButton.addEventListener('click', () => {
            if (currentPageIndex < pages.length - 1) { // -1 because we flip the current page to reveal the next
                 // Attempt to play music again if it didn't start initially
                if (music.paused) {
                    music.play().catch(e => console.log("Music play attempt failed after button click:", e));
                }

                // Flip the current page
                pages[currentPageIndex].classList.add('flipped');

                // Move to the next page
                currentPageIndex++;

                // If we've just revealed the last page, disable the button
                if (currentPageIndex === pages.length - 1) {
                    // Delay the button change until after the flip animation is complete (1.2 seconds)
                    setTimeout(() => {
                        flipButton.textContent = 'End of Letter';
                        flipButton.disabled = true;
                        flipButton.style.opacity = '0.7';
                        flipButton.style.cursor = 'default';
                        flipButton.style.backgroundColor = '#585858';
                    }, 1200); 
                }
            }
        });
    </script>

</body>
</html>
